(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{475:function(s,a,t){s.exports=t.p+"assets/img/image-20220103231646572.e75e48cc.png"},476:function(s,a,t){s.exports=t.p+"assets/img/image-20220104173949522.26126d04.png"},477:function(s,a,t){s.exports=t.p+"assets/img/image-20220106165104809.9b556bbc.png"},478:function(s,a,t){s.exports=t.p+"assets/img/image-20220106200928958.cfd4a225.png"},479:function(s,a,t){s.exports=t.p+"assets/img/image-20220106224326481.db776873.png"},533:function(s,a,t){"use strict";t.r(a);var r=t(16),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h1",{attrs:{id:"mysql常用总结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mysql常用总结"}},[s._v("#")]),s._v(" MySQL常用总结")]),s._v(" "),r("h2",{attrs:{id:"安装使用"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装使用"}},[s._v("#")]),s._v(" 安装使用")]),s._v(" "),r("h3",{attrs:{id:"_1-清理环境"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-清理环境"}},[s._v("#")]),s._v(" 1.清理环境")]),s._v(" "),r("p",[r("strong",[s._v("卸载MariaDB")])]),s._v(" "),r("blockquote",[r("p",[s._v("因为一些Linux上会自带MariaDB，它是MySQL的二次开发版本")]),s._v(" "),r("p",[s._v("MariaDB的存储引擎使用XtraDB")])]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#是否存在MariaDB")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mariadb\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#卸载MariaDB")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e --nodeps mariadb-libs\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("p",[r("strong",[s._v("卸载MySQL5.5")])]),s._v(" "),r("blockquote",[r("p",[s._v("若以前安装过MySQL5.5")])]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看要卸载的MySQL名称 -i表示不区分大小写")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -i mysql\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#关闭MySQL服务")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" msyql stop\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#卸载客户端")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e MySQL-client-5.5.54-1.linux2.6.x86_64\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#卸载服务端")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e MySQL-server-5.5.54-1.linux2.6.x86_64\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看是否有卸载残留")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" mysql \n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除卸载残留 尤其其中/var/lib/mysql一定要确保删除")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / -iname "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql'")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除/etc/my.cnf文件")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /etc/my.cnf\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br")])]),r("p",[r("strong",[s._v("卸载MySQL5.7")])]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#关闭服务")]),s._v("\nsystemctl stop mysqld\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#和安装相反的顺序删除rpm")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e mysql-community-server-5.7.28-1.el7.x86_64\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e mysql-community-client-5.7.28-1.el7.x86_64\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e mysql-community-libs-5.7.28-1.el7.x86_64\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e mysql-community-common-5.7.28-1.el7.x86_64\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看是否有卸载残留")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" mysql\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rvf xxx\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除/etc/my.cnf")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /etc/my.cnf\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查询是否还有什么残留信息  尤其其中/var/lib/mysql一定要确保删除")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / -iname mysql\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rvf xxx\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br")])]),r("h3",{attrs:{id:"_2-安装-初始化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-初始化"}},[s._v("#")]),s._v(" 2.安装+初始化")]),s._v(" "),r("p",[r("strong",[s._v("MySQL下载")])]),s._v(" "),r("p",[s._v("MySQL官网 https://www.mysql.com")]),s._v(" "),r("p",[s._v("下载所需要的包")]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("rpm -ivh mysql-community-common-5.7.28-1.el7.x86_64.rpm\n\nrpm -ivh mysql-community-libs-5.7.28-1.el7.x86_64.rpm\n\nrpm -ivh mysql-community-client-5.7.28-1.el7.x86_64.rpm\n\nrpm -ivh mysql-community-server-5.7.28-1.el7.x86_64.rpm\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("p",[r("strong",[s._v("MySQL Linux中安装")])]),s._v(" "),r("p",[s._v("拷贝包到/opt目录下")]),s._v(" "),r("p",[s._v("执行rpm安装命令")]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("rpm -ivh mysql-community-common-5.7.28-1.el7.x86_64.rpm\n\nrpm -ivh mysql-community-libs-5.7.28-1.el7.x86_64.rpm\n\nrpm -ivh mysql-community-client-5.7.28-1.el7.x86_64.rpm\n\nrpm -ivh mysql-community-server-5.7.28-1.el7.x86_64.rpm\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("p",[r("strong",[s._v("查看是否安装成功")])]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看MySQL版本")]),s._v("\nmysqladmin --version\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看软件包是否安装成功")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("p",[r("strong",[s._v("初始化MySQL")])]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#root身份运行，初始化MySQL生成临时密码")]),s._v("\nmysqld --initialize --user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("blockquote",[r("p",[s._v("--initialize 选项默认以“安全”模式来初始化，会为 root 用户生成一个密码并将该密码标记为过期，登录后你要设置一个新的密码")])]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看生成的临时密码")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /var/log/mysqld.log\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("blockquote",[r("p",[s._v("root@localhost: 后面就是初始化的密码")])]),s._v(" "),r("h3",{attrs:{id:"_3-自启动-临时密码"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-自启动-临时密码"}},[s._v("#")]),s._v(" 3.自启动+临时密码")]),s._v(" "),r("p",[r("strong",[s._v("MySQL服务管理命令")])]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看状态")]),s._v("\nsystemctl status mysqld.service\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动")]),s._v("\nsystemctl start mysqld.service\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#关闭")]),s._v("\nsystemctl stop mysqld.service\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启")]),s._v("\nsystemctl restart mysqld.service\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#是否自启动查询")]),s._v("\nsystemctl list-unit-files"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysqld.service\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启自启动")]),s._v("\nsystemctl "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mysqld.service\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#关闭自启动")]),s._v("\nsystemctl disable mysqld.service\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br")])]),r("p",[r("strong",[s._v("登录MySQL修改临时密码")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#登录MySQL,输入临时密码")]),s._v("\nmysql "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改临时密码")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" IDENTIFIED "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'new_password'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" IDENTIFIED "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#quit退出，使用新密码登录即可")]),s._v("\nquit\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br")])]),r("h3",{attrs:{id:"_4-字符集问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-字符集问题"}},[s._v("#")]),s._v(" 4.字符集问题")]),s._v(" "),r("p",[r("strong",[s._v("查看字符集")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'character%'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%char%'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("p",[r("strong",[s._v("修改字符集")])]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#编辑配置文件")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/my.cnf\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#添加默认字符集设置")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("client"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ndefault-character-set"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8 "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端字符集")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ncharacter-set-server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8 "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 必选 服务器端字符集")]),s._v("\ncollation-server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8_general_ci "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务器端校对规则")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启MySQL")]),s._v("\nsystemctl restart mysqld\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br")])]),r("p",[r("strong",[s._v("修改以前库的字符集")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("database")]),s._v(" mydb "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("character")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[r("strong",[s._v("修改以前表的字符集")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" dept "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("convert")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("character")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("blockquote",[r("p",[s._v("但是原有的数据如果是用非'utf8'编码的话，数据本身编码不会发生改变。")]),s._v(" "),r("p",[s._v("已有数据需要导出或删除，然后重新插入。")])]),s._v(" "),r("h3",{attrs:{id:"_5-目录结构"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-目录结构"}},[s._v("#")]),s._v(" 5.目录结构")]),s._v(" "),r("table",[r("thead",[r("tr",[r("th",[s._v("参数")]),s._v(" "),r("th",[s._v("路径")]),s._v(" "),r("th",[s._v("解释")]),s._v(" "),r("th",[s._v("备注")])])]),s._v(" "),r("tbody",[r("tr",[r("td",[s._v("--basedir")]),s._v(" "),r("td",[s._v("/usr/bin")]),s._v(" "),r("td",[s._v("相关命令目录")]),s._v(" "),r("td",[s._v("mysqladmin mysqldump等命令")])]),s._v(" "),r("tr",[r("td",[s._v("--datadir")]),s._v(" "),r("td",[s._v("/var/lib/mysql/")]),s._v(" "),r("td",[s._v("mysql数据库文件的存放路径")]),s._v(" "),r("td")]),s._v(" "),r("tr",[r("td",[s._v("--plugin-dir")]),s._v(" "),r("td",[s._v("/usr/lib64/mysql/plugin")]),s._v(" "),r("td",[s._v("mysql插件存放路径")]),s._v(" "),r("td")]),s._v(" "),r("tr",[r("td",[s._v("--log-error")]),s._v(" "),r("td",[s._v("/var/log/mysqld.log")]),s._v(" "),r("td",[s._v("mysql错误日志路径")]),s._v(" "),r("td")]),s._v(" "),r("tr",[r("td",[s._v("--pid-file")]),s._v(" "),r("td",[r("strong",[s._v("/var/run/mysqld/mysqld.pid")])]),s._v(" "),r("td",[s._v("进程pid文件")]),s._v(" "),r("td")]),s._v(" "),r("tr",[r("td",[s._v("--socket")]),s._v(" "),r("td",[s._v("/var/lib/mysql/mysql.sock")]),s._v(" "),r("td",[s._v("本地连接时用的unix套接字文   件")]),s._v(" "),r("td")]),s._v(" "),r("tr",[r("td"),s._v(" "),r("td",[s._v("/usr/share/mysql")]),s._v(" "),r("td",[s._v("配置文件目录")]),s._v(" "),r("td",[s._v("mysql脚本及配置文件")])]),s._v(" "),r("tr",[r("td"),s._v(" "),r("td",[s._v("/etc/systemd/system/multi-user.target.wants/mysqld.service")]),s._v(" "),r("td",[s._v("服务启停相关脚本")]),s._v(" "),r("td")]),s._v(" "),r("tr",[r("td"),s._v(" "),r("td",[s._v("/etc/my.cnf")]),s._v(" "),r("td",[s._v("mysql配置文件")]),s._v(" "),r("td",[s._v("cat /etc/my.cnf")])])])]),s._v(" "),r("h2",{attrs:{id:"用户权限"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#用户权限"}},[s._v("#")]),s._v(" 用户权限")]),s._v(" "),r("blockquote",[r("p",[s._v("MySQL的权限管理通过四张表实现 user,db,tables_priv,columns_priv")])]),s._v(" "),r("blockquote",[r("p",[s._v("全局权限表user,实现root的权限设置")]),s._v(" "),r("p",[s._v("库级权限表db,实现当个库的权限设置")]),s._v(" "),r("p",[s._v("表级权限表tables_priv，实现单张表的权限设置")]),s._v(" "),r("p",[s._v("列级权限表columns_priv，实现单个字段的权限设置")])]),s._v(" "),r("p",[s._v("当MySQL用户通过身份认证后，进行权限分配，分别按照user表，db表，tables_pirv表，columns_priv表的顺序验证加载权限")]),s._v(" "),r("blockquote",[r("p",[s._v("如果查询权限为N，则继续往下查询，查询都为Y，则停止查询，否则查到最后column_priv表")])]),s._v(" "),r("h3",{attrs:{id:"_1-查看权限表"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看权限表"}},[s._v("#")]),s._v(" 1.查看权限表")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" mysql"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看user表结构")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看用户权限信息")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" \\G"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("host"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("authentication_string"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("plugin "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br")])]),r("h3",{attrs:{id:"_2-创建用户"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建用户"}},[s._v("#")]),s._v(" 2.创建用户")]),s._v(" "),r("blockquote",[r("p",[s._v("username：你将创建的用户名")]),s._v(" "),r("p",[s._v("host：指定登录主机，不指定，默认为'%'")]),s._v(" "),r("ul",[r("li",[s._v("% --表示所有远程通过TCP方式连接")]),s._v(" "),r("li",[s._v("IP --地址 如 (192.168.1.2,127.0.0.1) 通过制定ip地址进行的TCP方式的连接")]),s._v(" "),r("li",[s._v("机器名 --通过制定网络中的机器名进行的TCP方式的连接")]),s._v(" "),r("li",[s._v("::1 --IPv6的本地ip地址，等同于IPv4的 127.0.0.1")]),s._v(" "),r("li",[s._v("localhost --本地方式通过命令行方式连接 ，如mysql -u xxx -p xxx 方式的连接。")])])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用户创建命令")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --\x3e CREATE USER 'username'@'host' IDENTIFIED BY 'password';")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" viki1"),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" identified "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看user表")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" host"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("authentication_string"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("plugin "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("p",[r("img",{attrs:{src:t(475),alt:"image-20220103231646572"}})]),s._v(" "),r("blockquote",[r("p",[s._v("注意：密码相同，使用mysql_native_password插件加密后密文相同,加密算法为MYSQLSHA1")]),s._v(" "),r("p",[s._v("MySQL5.7密码保存在 authentication_string 字段中")])]),s._v(" "),r("h3",{attrs:{id:"_3-修改密码"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改密码"}},[s._v("#")]),s._v(" 3.修改密码")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改当前用户密码")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" password "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'111111'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改指定用户密码")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" msyql"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" authentication_string "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'666666'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'viki1'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#刷新权限")]),s._v("\nflush "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br")])]),r("h3",{attrs:{id:"_4-修改用户名"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-修改用户名"}},[s._v("#")]),s._v(" 4.修改用户名")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改指定用户名，单表操作")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" mysql"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kimi2'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'viki1'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#刷新权限")]),s._v("\nflush "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("h3",{attrs:{id:"_5-删除用户"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-删除用户"}},[s._v("#")]),s._v(" 5.删除用户")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除用户用drop")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" kimi"),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果登录方式为%，可以省略不写")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" viki1\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br")])]),r("blockquote",[r("p",[s._v("不能通过delete from user u where user='li4' 进行删除，系统会有残留信息保留。")])]),s._v(" "),r("h3",{attrs:{id:"_6-分配权限"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-分配权限"}},[s._v("#")]),s._v(" 6.分配权限")]),s._v(" "),r("p",[r("strong",[s._v("使用grant命令分配指定权限，用户如果不存在则创建")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#给viki1分配testdb这个库下的所有表的CRUD权限(用户名@主机名)")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" testdb"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" viki1"),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#给Viki1分配可以给别人设置权限,后加（with grant option）")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" testdb"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" viki1"),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#刷新一下")]),s._v("\nflush "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看刚刚给viki1分配的权限,查看db表是因为分配的是testdb库")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" db "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'viki1'")]),s._v(" \\G"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br")])]),r("p",[r("img",{attrs:{src:t(476),alt:"image-20220104173949522"}})]),s._v(" "),r("p",[r("strong",[s._v("使用grant命令分配所有库表权限")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建一个用户并分配所有库表的权限")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" coco"),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" identified "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("h3",{attrs:{id:"_7-撤销权限"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_7-撤销权限"}},[s._v("#")]),s._v(" 7.撤销权限")]),s._v(" "),r("p",[r("strong",[s._v("使用revoke撤销权限")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# revoke 权限1,权限2,…权限n on 数据库名称.表名称 from 用户名@用户地址 ;")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#撤销所有库表的权限")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("revoke")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" coco"),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#撤销对应库下的所有表的CRUD权限")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("revoke")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" testdb"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" viki1"),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br")])]),r("h3",{attrs:{id:"_8-查看权限"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_8-查看权限"}},[s._v("#")]),s._v(" 8.查看权限")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看当前用户权限")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" grants"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看某个用户的全局权限")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mysql"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'viki1'")]),s._v(" \\G"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看某个用户某个表的权限")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mysql"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tables_priv "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'coco'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br")])]),r("h2",{attrs:{id:"存储引擎"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#存储引擎"}},[s._v("#")]),s._v(" 存储引擎")]),s._v(" "),r("h3",{attrs:{id:"_1-mysql架构图"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-mysql架构图"}},[s._v("#")]),s._v(" 1.MySQL架构图")]),s._v(" "),r("p",[r("img",{attrs:{src:t(477),alt:"image-20220106165104809"}})]),s._v(" "),r("h3",{attrs:{id:"_2-开启mysql缓存"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-开启mysql缓存"}},[s._v("#")]),s._v(" 2.开启MySQL缓存")]),s._v(" "),r("p",[r("strong",[s._v("修改/etc/my.cnf配置文件")])]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("#新增一行\nquery_cache_tpye = 1\n\n#重启MySQL服务\nsystemctl restart mysqld\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("p",[r("strong",[s._v("再开启查询执行计划")])]),s._v(" "),r("blockquote",[r("p",[s._v("可以查询SQL语句底层的执行过程")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看缓存是否成功开启")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%cache%'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Variable_name                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Value")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" binlog_cache_size              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" binlog_stmt_cache_size         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" have_query_cache               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" host_cache_size                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("279")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" innodb_disable_sort_file_cache "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OFF")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" innodb_ft_cache_size           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000000")]),s._v("              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" innodb_ft_result_cache_limit   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000000000")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" innodb_ft_total_cache_size     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("640000000")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_cache_age_threshold        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_cache_block_size           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_cache_division_limit       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" max_binlog_cache_size          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18446744073709547520")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" max_binlog_stmt_cache_size     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18446744073709547520")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" metadata_locks_cache_size      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query_cache_limit              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query_cache_min_res_unit       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query_cache_size               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query_cache_type               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OFF")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query_cache_wlock_invalidate   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OFF")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" stored_program_cache           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" table_definition_cache         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1400")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" table_open_cache               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" table_open_cache_instances     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("                   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" thread_cache_size              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#query_cache_tpye 为ON时缓存开启成功")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Variable_name                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Value")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" binlog_cache_size              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" binlog_stmt_cache_size         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" have_query_cache               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" host_cache_size                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("279")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" innodb_disable_sort_file_cache "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OFF")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" innodb_ft_cache_size           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000000")]),s._v("              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" innodb_ft_result_cache_limit   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000000000")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" innodb_ft_total_cache_size     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("640000000")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_cache_age_threshold        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_cache_block_size           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_cache_division_limit       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" max_binlog_cache_size          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18446744073709547520")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" max_binlog_stmt_cache_size     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18446744073709547520")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" metadata_locks_cache_size      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query_cache_limit              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query_cache_min_res_unit       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query_cache_size               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query_cache_type               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v("                   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query_cache_wlock_invalidate   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OFF")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" stored_program_cache           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),s._v("                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" table_definition_cache         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1400")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" table_open_cache               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" table_open_cache_instances     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("                   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" thread_cache_size              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.04")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看查询计划是否开启，0关闭，1开启")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" @"),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@profiling")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" @"),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@profiling")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#等价于select @@profiling")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%profiling%'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------------------+-------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Variable_name          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Value")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------------------+-------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" have_profiling         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" profiling              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OFF")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" profiling_history_size "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------------------+-------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.05")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#要想看到查询过程，需要开启查询计划")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" profiling "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br"),r("span",{staticClass:"line-number"},[s._v("53")]),r("br"),r("span",{staticClass:"line-number"},[s._v("54")]),r("br"),r("span",{staticClass:"line-number"},[s._v("55")]),r("br"),r("span",{staticClass:"line-number"},[s._v("56")]),r("br"),r("span",{staticClass:"line-number"},[s._v("57")]),r("br"),r("span",{staticClass:"line-number"},[s._v("58")]),r("br"),r("span",{staticClass:"line-number"},[s._v("59")]),r("br"),r("span",{staticClass:"line-number"},[s._v("60")]),r("br"),r("span",{staticClass:"line-number"},[s._v("61")]),r("br"),r("span",{staticClass:"line-number"},[s._v("62")]),r("br"),r("span",{staticClass:"line-number"},[s._v("63")]),r("br"),r("span",{staticClass:"line-number"},[s._v("64")]),r("br"),r("span",{staticClass:"line-number"},[s._v("65")]),r("br"),r("span",{staticClass:"line-number"},[s._v("66")]),r("br"),r("span",{staticClass:"line-number"},[s._v("67")]),r("br"),r("span",{staticClass:"line-number"},[s._v("68")]),r("br"),r("span",{staticClass:"line-number"},[s._v("69")]),r("br"),r("span",{staticClass:"line-number"},[s._v("70")]),r("br"),r("span",{staticClass:"line-number"},[s._v("71")]),r("br"),r("span",{staticClass:"line-number"},[s._v("72")]),r("br"),r("span",{staticClass:"line-number"},[s._v("73")]),r("br"),r("span",{staticClass:"line-number"},[s._v("74")]),r("br"),r("span",{staticClass:"line-number"},[s._v("75")]),r("br"),r("span",{staticClass:"line-number"},[s._v("76")]),r("br"),r("span",{staticClass:"line-number"},[s._v("77")]),r("br"),r("span",{staticClass:"line-number"},[s._v("78")]),r("br"),r("span",{staticClass:"line-number"},[s._v("79")]),r("br"),r("span",{staticClass:"line-number"},[s._v("80")]),r("br"),r("span",{staticClass:"line-number"},[s._v("81")]),r("br"),r("span",{staticClass:"line-number"},[s._v("82")]),r("br"),r("span",{staticClass:"line-number"},[s._v("83")]),r("br"),r("span",{staticClass:"line-number"},[s._v("84")]),r("br"),r("span",{staticClass:"line-number"},[s._v("85")]),r("br"),r("span",{staticClass:"line-number"},[s._v("86")]),r("br"),r("span",{staticClass:"line-number"},[s._v("87")]),r("br"),r("span",{staticClass:"line-number"},[s._v("88")]),r("br"),r("span",{staticClass:"line-number"},[s._v("89")]),r("br"),r("span",{staticClass:"line-number"},[s._v("90")]),r("br")])]),r("h3",{attrs:{id:"_3-缓存小栗子"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-缓存小栗子"}},[s._v("#")]),s._v(" 3.缓存小栗子")]),s._v(" "),r("p",[s._v("执行同一条sql语句多次，查看执行过程")]),s._v(" "),r("p",[s._v("执行相同sql，关键字大小写不同，不会命中缓存")]),s._v(" "),r("blockquote",[r("p",[r("strong",[s._v("注意：SQL必须是一致的，否则，不能命中缓存。")])])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#执行任意一条sql")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#再重复执行一次")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看最近执行语句")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" profiles"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" profiles"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----------+------------+---------------------------------------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Query_ID "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Duration   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Query                                                   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----------+------------+---------------------------------------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("        "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00017300")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" @"),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@profiling")]),s._v("                                      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("        "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00160700")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%profiling%'")]),s._v("                       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("        "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00044025")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("        "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00025700")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("        "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00025700")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" student"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----------+------------+---------------------------------------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看语句执行计划（过程）select * from student;")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" profile cpu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("block io "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("对应逻辑架构的流程\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Status")]),s._v("                         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Duration "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("starting")]),s._v("                       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000023")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Waiting "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("starting")]),s._v("                       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000003")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" checking query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000028")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" checking permissions           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000006")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Opening "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tables")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000013")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" init                           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000012")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" System "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000006")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Waiting "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" System "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000013")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" optimizing                     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000004")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("statistics")]),s._v("                     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000009")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" preparing                      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000007")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" executing                      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Sending "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),s._v("                   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000030")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("                            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000003")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("                      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000033")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" closing "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tables")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000008")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" freeing items                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000005")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Waiting "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" freeing items                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000019")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Waiting "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000004")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" freeing items                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" storing result "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" query cache  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000003")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" cleaning up                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000009")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------+")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#第二次查询同一条sql，走缓存 select * from student;")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" profile cpu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("block io "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Status")]),s._v("                         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Duration "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("starting")]),s._v("                       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000021")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Waiting "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("starting")]),s._v("                       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" checking query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000005")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" checking "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" cached  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000003")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" checking permissions           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000009")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" sending cached result "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" clien "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000022")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" cleaning up                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000006")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------+")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#只要sql不同，缓存就不会命中 SELECT * FROM student;")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" profile cpu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("block io "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Status")]),s._v("                         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Duration "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("starting")]),s._v("                       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000019")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Waiting "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000003")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("starting")]),s._v("                       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000003")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" checking query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000029")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" checking permissions           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000007")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Opening "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tables")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000031")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" init                           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000014")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" System "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000006")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Waiting "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" System "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000011")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" optimizing                     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000003")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("statistics")]),s._v("                     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000008")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" preparing                      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000007")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" executing                      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Sending "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),s._v("                   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000032")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("                            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000003")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" query "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("                      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000006")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" closing "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tables")]),s._v("                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000005")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" freeing items                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000004")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Waiting "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" freeing items                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000006")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Waiting "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query cache "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" freeing items                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" storing result "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" query cache  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" cleaning up                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000007")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------------+----------+")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br"),r("span",{staticClass:"line-number"},[s._v("53")]),r("br"),r("span",{staticClass:"line-number"},[s._v("54")]),r("br"),r("span",{staticClass:"line-number"},[s._v("55")]),r("br"),r("span",{staticClass:"line-number"},[s._v("56")]),r("br"),r("span",{staticClass:"line-number"},[s._v("57")]),r("br"),r("span",{staticClass:"line-number"},[s._v("58")]),r("br"),r("span",{staticClass:"line-number"},[s._v("59")]),r("br"),r("span",{staticClass:"line-number"},[s._v("60")]),r("br"),r("span",{staticClass:"line-number"},[s._v("61")]),r("br"),r("span",{staticClass:"line-number"},[s._v("62")]),r("br"),r("span",{staticClass:"line-number"},[s._v("63")]),r("br"),r("span",{staticClass:"line-number"},[s._v("64")]),r("br"),r("span",{staticClass:"line-number"},[s._v("65")]),r("br"),r("span",{staticClass:"line-number"},[s._v("66")]),r("br"),r("span",{staticClass:"line-number"},[s._v("67")]),r("br"),r("span",{staticClass:"line-number"},[s._v("68")]),r("br"),r("span",{staticClass:"line-number"},[s._v("69")]),r("br"),r("span",{staticClass:"line-number"},[s._v("70")]),r("br"),r("span",{staticClass:"line-number"},[s._v("71")]),r("br"),r("span",{staticClass:"line-number"},[s._v("72")]),r("br"),r("span",{staticClass:"line-number"},[s._v("73")]),r("br"),r("span",{staticClass:"line-number"},[s._v("74")]),r("br"),r("span",{staticClass:"line-number"},[s._v("75")]),r("br"),r("span",{staticClass:"line-number"},[s._v("76")]),r("br"),r("span",{staticClass:"line-number"},[s._v("77")]),r("br"),r("span",{staticClass:"line-number"},[s._v("78")]),r("br"),r("span",{staticClass:"line-number"},[s._v("79")]),r("br"),r("span",{staticClass:"line-number"},[s._v("80")]),r("br"),r("span",{staticClass:"line-number"},[s._v("81")]),r("br"),r("span",{staticClass:"line-number"},[s._v("82")]),r("br"),r("span",{staticClass:"line-number"},[s._v("83")]),r("br"),r("span",{staticClass:"line-number"},[s._v("84")]),r("br"),r("span",{staticClass:"line-number"},[s._v("85")]),r("br"),r("span",{staticClass:"line-number"},[s._v("86")]),r("br"),r("span",{staticClass:"line-number"},[s._v("87")]),r("br"),r("span",{staticClass:"line-number"},[s._v("88")]),r("br"),r("span",{staticClass:"line-number"},[s._v("89")]),r("br"),r("span",{staticClass:"line-number"},[s._v("90")]),r("br"),r("span",{staticClass:"line-number"},[s._v("91")]),r("br"),r("span",{staticClass:"line-number"},[s._v("92")]),r("br"),r("span",{staticClass:"line-number"},[s._v("93")]),r("br"),r("span",{staticClass:"line-number"},[s._v("94")]),r("br"),r("span",{staticClass:"line-number"},[s._v("95")]),r("br"),r("span",{staticClass:"line-number"},[s._v("96")]),r("br"),r("span",{staticClass:"line-number"},[s._v("97")]),r("br")])]),r("p",[r("strong",[s._v("查看存储引擎")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" engines"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%storage_engine%'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("h3",{attrs:{id:"_4-innodb"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-innodb"}},[s._v("#")]),s._v(" 4.InnoDB")]),s._v(" "),r("blockquote",[r("p",[s._v("MySQL5.5开始默认使用InnoDB存储引擎")])]),s._v(" "),r("p",[r("strong",[s._v("特点")])]),s._v(" "),r("blockquote",[r("p",[s._v("行级锁\n支持事务，适合处理大量短期事务\n读写阻塞与事务隔离级别相关\n可缓存数据和索引\n支持聚簇索引\n崩溃恢复性好\n支持MVCC高并发\n从MySQL5.5后支持全文索引\n从MySQL5.5开始为默认的数据库引擎")])]),s._v(" "),r("p",[r("strong",[s._v("适用场景")])]),s._v(" "),r("blockquote",[r("p",[s._v("InnoDB是MySQL的默认事务型引擎，被设计用来处理大量的短期(short-lived)事务。可以确保事务的完整提交(Commit)和回滚(Rollback)。")]),s._v(" "),r("p",[s._v("除了增加和查询外，还需要更新，删除操作，那么，应优选选择InnoDB存储引擎。")]),s._v(" "),r("p",[s._v("除非有非常特别的原因需要使用其他的存储引擎，否则应该优先考虑InnoDB引擎。")])]),s._v(" "),r("p",[r("strong",[s._v("InnoDB引擎文件结构")])]),s._v(" "),r("blockquote",[r("p",[s._v(".frm 表格式定义，存放每个表自己的定义")]),s._v(" "),r("p",[s._v(".ibd 数据文件，存储数据和索引")]),s._v(" "),r("p",[s._v("ibdata1 位于上一级目录，所有表都集中在这里")])]),s._v(" "),r("h3",{attrs:{id:"_5-myisam"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-myisam"}},[s._v("#")]),s._v(" 5.MyISAM")]),s._v(" "),r("blockquote",[r("p",[s._v("MySQL5.5前默认使用MyISAM存储引擎")])]),s._v(" "),r("p",[r("strong",[s._v("特点")])]),s._v(" "),r("blockquote",[r("p",[s._v("不支持事务和行级锁\n表级锁定\n读写相互阻塞，写入不能读，读时不能写\n只缓存索引\n不支持外键索引\n不支持聚簇索引\n读取数据较快，占用资源较少\n不支持MVCC（多版本并发控制机制）高并发\n"),r("strong",[s._v("崩溃后无法安全恢复")]),s._v("\nMySQL5.5前默认的数据库引擎")])]),s._v(" "),r("p",[r("strong",[s._v("适用场景")])]),s._v(" "),r("blockquote",[r("p",[s._v("只读（或者写较少）、表较少（可以接受长时间进行修复操作）")])]),s._v(" "),r("p",[r("strong",[s._v("MyISAM引擎文件结构")])]),s._v(" "),r("blockquote",[r("p",[s._v(".frm 存储定义表")]),s._v(" "),r("p",[s._v(".MYD 存储数据")]),s._v(" "),r("p",[s._v(".MYI 存储索引")])]),s._v(" "),r("p",[r("img",{attrs:{src:t(478),alt:"image-20220106200928958"}})]),s._v(" "),r("blockquote",[r("p",[s._v("表格来源：https://docs.oracle.com/cd/E17952_01/mysql-5.5-en/storage-engines.html")]),s._v(" "),r("p",[s._v("InnoDB、MyISAM部分参考：https://www.jianshu.com/p/cf4e34fb999f")])]),s._v(" "),r("h3",{attrs:{id:"_6-其他存储引擎"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-其他存储引擎"}},[s._v("#")]),s._v(" 6.其他存储引擎")]),s._v(" "),r("p",[r("strong",[s._v("Archive")])]),s._v(" "),r("blockquote",[r("p",[s._v("Archive档案存储引擎只支持"),r("strong",[s._v("INSERT")]),s._v("和"),r("strong",[s._v("SELECT")]),s._v("操作，在MySQL5.1之前不支持索引。")]),s._v(" "),r("p",[s._v("Archive表**适合日志和数据采集（档案）**类应用。")]),s._v(" "),r("p",[s._v("根据英文的测试结论来看，Archive表比MyISAM表要小大约75%，比支持事务处理的InnoDB表小大约83%。")])]),s._v(" "),r("p",[r("strong",[s._v("Blackhole")])]),s._v(" "),r("blockquote",[r("p",[s._v("Blackhole引擎没有实现任何存储机制，它会丢弃所有插入的数据，不做任何保存。")]),s._v(" "),r("p",[s._v("但服务器会记录Blackhole表的日志，所以可以用于复制数据到备库，或者简单地记录到日志。但这种应用方式会碰到很多问题，因此并不推荐。")]),s._v(" "),r("p",[s._v("???")])]),s._v(" "),r("p",[r("strong",[s._v("CSV")])]),s._v(" "),r("blockquote",[r("p",[s._v("CSV引擎可以将普通的CSV文件作为MySQL的表来处理，但不支持索引。")]),s._v(" "),r("p",[s._v("CSV引擎可以作为一种数据交换的机制，非常有用。")]),s._v(" "),r("p",[s._v("CSV存储的数据直接可以在操作系统里，用文本编辑器，或者excel读取。")])]),s._v(" "),r("p",[r("strong",[s._v("Memory")])]),s._v(" "),r("blockquote",[r("p",[s._v("如果需要快速地访问数据，并且这些数据不会被修改，重启以后丢失也没有关系，那么使用Memory表是非常有用。")]),s._v(" "),r("p",[s._v("Memory表至少比MyISAM表要快一个数量级。")])]),s._v(" "),r("p",[r("strong",[s._v("Federated")])]),s._v(" "),r("blockquote",[r("p",[s._v("Federated引擎是访问其他MySQL服务器的一个代理，尽管该引擎看起来提供了一种很好的跨服务器的灵活性，但也经常带来问题，因此默认是禁用的。")])]),s._v(" "),r("p",[r("strong",[s._v("Percona")]),s._v("*")]),s._v(" "),r("blockquote",[r("p",[r("strong",[s._v("Percona")]),s._v(" 为 MySQL 数据库服务器进行了改进，在功能和性能上较 MySQL 有很显著的提升。该版本提升了在高负载情况下的 InnoDB 的性能、为 DBA 提供一些非常有用的性能诊断工具；另外有更多的参数和命令来控制服务器行为。 存储引擎为Xtradb，完全替代Innodb,并且在性能和并发上做得更好。")]),s._v(" "),r("p",[s._v("阿里大部分mysql数据库使用的是percona的原型加以修改。AliSql+AliRedis")])]),s._v(" "),r("h2",{attrs:{id:"sql执行顺序"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sql执行顺序"}},[s._v("#")]),s._v(" SQL执行顺序")]),s._v(" "),r("h3",{attrs:{id:"_1-完整sql执行流程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-完整sql执行流程"}},[s._v("#")]),s._v(" 1.完整sql执行流程")]),s._v(" "),r("p",[r("img",{attrs:{src:t(479),alt:"image-20220106224326481"}})]),s._v(" "),r("p",[r("strong",[s._v("笛卡尔积")])]),s._v(" "),r("blockquote",[r("p",[s._v("https://zh.wikipedia.org/wiki/%E7%AC%9B%E5%8D%A1%E5%84%BF%E7%A7%AF")]),s._v(" "),r("p",[s._v("数据库中就表示多表组合的所有情况")])]),s._v(" "),r("p",[r("strong",[s._v("比如一个较完整的多表连接查询语句")])]),s._v(" "),r("p",[s._v("第一步")]),s._v(" "),r("blockquote",[r("p",[s._v("首先对from子句中的前两个表执行一个笛卡尔乘积，生成虚拟表 "),r("strong",[s._v("vt1")]),s._v("（选择相对小的表做基础表）")])]),s._v(" "),r("p",[s._v("第二步")]),s._v(" "),r("blockquote",[r("p",[s._v("接下来应用on筛选器，on中的逻辑表达式将应用到 vt1 中的各个行，筛选出满足on逻辑表达式的行，生成虚拟表 "),r("strong",[s._v("vt2")])])]),s._v(" "),r("p",[s._v("第三步")]),s._v(" "),r("blockquote",[r("p",[s._v("如果是outer join 那么这一步就将添加外部行，left outer jion 就把左表在第二步中过滤的添加进来，如果是right outer join 那么就将右表在第二步中过滤掉的行添加进来，这样生成虚拟表 "),r("strong",[s._v("vt3")])]),s._v(" "),r("p",[s._v("？？？")])]),s._v(" "),r("p",[s._v("第四步")]),s._v(" "),r("blockquote",[r("p",[s._v("如果 from 子句中的表数目多余两个表，那么就将vt3和第三个表连接从而计算笛卡尔乘积，生成虚拟表，该过程就是一个重复1-3的步骤，最终得到一个新的虚拟表 vt3")])]),s._v(" "),r("p",[s._v("第五步")]),s._v(" "),r("blockquote",[r("p",[s._v("应用where筛选器，对上一步生产的虚拟表引用where筛选器，过滤条件，生成虚拟表"),r("strong",[s._v("vt4")])])]),s._v(" "),r("p",[r("strong",[s._v("注意")])]),s._v(" "),r("blockquote",[r("p",[s._v("注意:对于包含outer join子句的查询，到底在on筛选器还是用where筛选器指定逻辑表达式呢？\non和where的最大区别在于，如果在on应用逻辑表达式那么在第三步outer join中还可以把移除的行再次添加回来，而where的移除的最终的。\n举个简单的例子:\n有一个学生表（班级,姓名）和一个成绩表(姓名,成绩)，我现在需要返回一个x班级的全体同学的成绩，但是这个班级有几个学生缺考，也就是说在成绩表中没有记录。\n为了得到我们预期的结果我们就需要在on子句指定学生和成绩表的关系（学生.姓名=成绩.姓名）\n那么我们是否发现在执行第二步的时候，对于没有参加考试的学生记录就不会出现在vt2中，因为他们被on的逻辑表达式过滤掉了\n但是我们用left outer join就可以把左表（学生）中没有参加考试的学生找回来，因为我们想返回的是x班级的所有学生\n如果在on中应用学生.班级='x'的话，left outer join会把x班级的所有学生记录找回\n所以只能在where筛选器中应用学生.班级='x' 因为它的过滤是最终的。\n总结: 最终过滤条件放在where语句中,on语句做数据匹配不要做筛选!!!")])]),s._v(" "),r("p",[s._v("第六步")]),s._v(" "),r("blockquote",[r("p",[s._v("group by 子句将中的唯一的值组合成为一组，得到虚拟表"),r("strong",[s._v("vt5")]),s._v("。如果应用了group by，那么后面的所有步骤都只能得到的vt5的列或者是聚合函数（count、sum、avg等）。"),r("strong",[s._v("原因在于最终的结果集中只为每个组包含一行,这一点请牢记。")])]),s._v(" "),r("p",[s._v("注意：一般group by和聚合函数一起使用，例如"),r("strong",[s._v("group_concat()")])])]),s._v(" "),r("p",[s._v("第七步")]),s._v(" "),r("blockquote",[r("p",[s._v("应用cube或者rollup选项，为vt5生成超组，生成"),r("strong",[s._v("vt6")])])]),s._v(" "),r("p",[s._v("第八步")]),s._v(" "),r("blockquote",[r("p",[s._v("应用having筛选器，生成"),r("strong",[s._v("vt7")]),s._v("。having筛选器是第一个也是为唯一一个应用到已分组数据的筛选器")])]),s._v(" "),r("p",[s._v("第九步")]),s._v(" "),r("blockquote",[r("p",[s._v("处理select子句。将vt7中的在select中出现的列筛选出来。生成"),r("strong",[s._v("vt8")])])]),s._v(" "),r("p",[s._v("第十步")]),s._v(" "),r("blockquote",[r("p",[s._v("应用distinct子句，vt8中移除相同的行，生成"),r("strong",[s._v("vt9")])])]),s._v(" "),r("p",[s._v("第十一步")]),s._v(" "),r("blockquote",[r("p",[s._v("应用order by子句。按照order_by_condition排序vt9，此时返回的一个游标，而不是虚拟表")])]),s._v(" "),r("p",[r("strong",[s._v("游标")])]),s._v(" "),r("blockquote",[r("p",[s._v("sql是基于集合的理论的，集合不会预先对他的行排序，它只是成员的逻辑集合，成员的顺序是无关紧要的。对表进行排序的查询可以返回一个对象，这个对象包含特定的物理顺序的逻辑组织。这个对象就叫游标。正因为返回值是游标，那么使用order by 子句查询不能应用于表表达式。排序是很需要成本的，除非你必须要排序，否则最好不要指定order by，最后，在这一步中是第一个也是唯一一个可以使用select列表中别名的步骤。")])]),s._v(" "),r("p",[s._v("第十二步")]),s._v(" "),r("blockquote",[r("p",[s._v("返回结果给请求者")])]),s._v(" "),r("h3",{attrs:{id:"_2-再探join"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-再探join"}},[s._v("#")]),s._v(" 2.再探join")])])}),[],!1,null,null,null);a.default=e.exports}}]);